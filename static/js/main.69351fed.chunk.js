(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{122:function(e,t,n){},125:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),s=n(24),o=n.n(s),i=n(6),u=n(65),l=n(18),j=n(9),d=n(66),b=n.n(d),p=n(16),h=n(33),f=n(14),O=n(67),m=n.n(O),x=n(1),g=function(e){var t=e.name,n=e.number,r=e.onDelete;return Object(x.jsx)(h.a,{className:m.a.contact,bg:"dark",text:"light",children:Object(x.jsxs)(h.a.Body,{children:[Object(x.jsx)(h.a.Title,{children:t}),Object(x.jsxs)(h.a.Text,{children:["Phone: ",n]}),Object(x.jsx)(f.a,{variant:"outline-light",onClick:r,children:"Delete"})]})})},v=n(21),_=n(12),w=n(10),k=n(13),y=n.n(k),L=n(26),C=n(22),N=n.n(C),S=Object(w.b)("contacts/get",function(){var e=Object(L.a)(y.a.mark((function e(t,n){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("/contacts");case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue());case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(w.b)("contacts/add",function(){var e=Object(L.a)(y.a.mark((function e(t,n){var r,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),!r.contacts.items.find((function(e){return e.name===t.name}))){e.next=5;break}return alert("".concat(t.name," is already in the list")),e.abrupt("return",n.rejectWithValue());case 5:return e.prev=5,e.next=8,N.a.post("/contacts",t);case 8:return a=e.sent,c=a.data,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),F=Object(w.b)("contact/delete",function(){var e=Object(L.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("/contacts/".concat(t));case 3:return e.abrupt("return",t);case 6:e.prev=6,e.t0=e.catch(0),n.rejectWithValue();case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(w.c)({name:"contacts",initialState:{items:[],filter:""},reducers:{changeFilter:function(e,t){var n=t.payload;e.filter=n}},extraReducers:(r={},Object(_.a)(r,S.fulfilled,(function(e,t){e.items=t.payload})),Object(_.a)(r,T.fulfilled,(function(e,t){e.items.push(t.payload)})),Object(_.a)(r,F.fulfilled,(function(e,t){e.items=e.items.filter((function(e){return e.id!==t.payload}))})),r)}),P=I.actions.changeFilter,E=I.reducer,R=n(36),U=function(e){return e.contacts.filter},z=Object(R.a)([function(e){return e.contacts.items},U],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),B=n(51),G=n.n(B),H=function(){var e=Object(i.c)(U),t=Object(i.b)();return Object(x.jsxs)("label",{className:G.a.filter,children:["Find",Object(x.jsx)("input",{type:"text",value:e,onChange:function(e){return t(P(e.target.value))},className:G.a.filter__input,placeholder:"Enter name..."})]})},W=n(52),A=n.n(W),M=document.querySelector("#modal-root");function D(e){var t=e.onClose,n=e.children;Object(a.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}),[]);var r=function(e){"Escape"===e.code&&t()};return Object(s.createPortal)(Object(x.jsx)("div",{className:A.a.backdrop,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(x.jsx)("div",{className:A.a.content,children:n})}),M)}var V=n(8);n(119);function Y(e){var t=e.onSubmit,n=Object(a.useState)(""),r=Object(v.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(""),u=Object(v.a)(o,2),l=u[0],j=u[1],d=Object(i.b)(),b=function(e){var t=e.currentTarget,n=t.name,r=t.value;switch(n){case"name":s(r);break;case"number":j(r);break;default:return}},p=function(){s(""),j("")};return Object(x.jsxs)(V.a,{onSubmit:function(e){e.preventDefault(),d(T({name:c,number:l})),p(),t()},children:[Object(x.jsxs)(V.a.Group,{controlId:"contact/name",children:[Object(x.jsx)(V.a.Label,{children:"Name"}),Object(x.jsx)(V.a.Control,{type:"text",placeholder:"Name",name:"name",value:c,onChange:b})]}),Object(x.jsxs)(V.a.Group,{controlId:"contact/phone",children:[Object(x.jsx)(V.a.Label,{children:"Phone"}),Object(x.jsx)(V.a.Control,{type:"number",placeholder:"phone number",value:l,name:"number",onChange:b})]}),Object(x.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]})}var J=n(68),K=n.n(J);function q(){var e=Object(a.useState)(!1),t=Object(v.a)(e,2),n=t[0],r=t[1],c=function(){return r((function(e){return!e}))};return Object(x.jsxs)(p.a,{children:[Object(x.jsxs)("div",{className:K.a.wrapper,children:[Object(x.jsx)(H,{}),Object(x.jsx)(f.a,{variant:"dark",size:"sm",onClick:c,children:"Add Contact"})]}),n&&Object(x.jsx)(D,{onClose:c,children:Object(x.jsx)(Y,{onSubmit:c})})]})}var Q=function(e){return e.auth.isLoggedIn},Z=function(e){return e.auth.user.email},X=function(e){return e.auth.isFetchingUser},$=function(e){return e.auth.isLoading},ee=n(69),te=n.n(ee),ne=function(){var e=Object(i.c)(z),t=Object(i.b)(),n=Object(i.c)(Q);return Object(a.useEffect)((function(){n&&t(S())}),[t,n]),Object(x.jsxs)(p.a,{children:[Object(x.jsx)(q,{}),e.length>0?Object(x.jsx)("ul",{style:{listStyle:"none",paddingInlineStart:"0",display:"flex",flexWrap:"wrap"},children:e.map((function(e){var n=e.id,r=e.name,a=e.number;return Object(x.jsx)("li",{className:te.a.contactList__item,children:Object(x.jsx)(g,{name:r,number:a,onDelete:function(){t(F(n))}})},n)}))}):Object(x.jsx)("h1",{children:"You don't have any contacts yet"})]})},re=n(44),ae=n(45);N.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var ce=function(e){N.a.defaults.headers.common.Authorization="Bearer ".concat(e)},se=function(){N.a.defaults.headers.common.Authorization=""},oe={register:Object(w.b)("user/register",function(){var e=Object(L.a)(y.a.mark((function e(t,n){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("/users/signup",t);case 3:return r=e.sent,a=r.data,ce(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),alert("Please use other credentials"),e.abrupt("return",n.rejectWithValue());case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),login:Object(w.b)("user/login",function(){var e=Object(L.a)(y.a.mark((function e(t,n){var r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("/users/login",t);case 3:return r=e.sent,a=r.data,ce(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue());case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),logout:Object(w.b)("user/logout",Object(L.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("/users/logout");case 3:se(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),fetchCurrentUser:Object(w.b)("user/fetchCurrent",function(){var e=Object(L.a)(y.a.mark((function e(t,n){var r,a,c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return ce(a),e.prev=5,e.next=8,N.a.get("/users/current");case 8:return c=e.sent,s=c.data,e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},ie=n(30),ue=n.n(ie);function le(){var e=Object(i.c)(Q),t=Object(i.c)(Z),n=Object(i.b)();return Object(x.jsx)(p.a,{fluid:!0,children:Object(x.jsxs)(re.a,{bg:"dark",variant:"dark",className:ue.a.navBar,expand:"lg",children:[Object(x.jsx)(re.a.Brand,{as:l.b,to:"/",children:"Contacts Book"}),e?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ae.a.Link,{as:l.b,to:"/contacts",className:ue.a.link,children:"Contacts"}),Object(x.jsxs)("div",{className:ue.a.userMenu,children:[Object(x.jsxs)(re.a.Text,{className:ue.a.welcome,children:["Hello, ",t]}),Object(x.jsx)(f.a,{type:"button",size:"sm",variant:"outline-light",onClick:function(){return n(oe.logout())},children:"Log out"})]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ae.a.Link,{as:l.b,to:"/register",className:ue.a.link,children:"Register"}),Object(x.jsx)(ae.a.Link,{as:l.b,to:"/login",className:ue.a.link,children:"Log In"})]})]})})}var je=n(71),de=n(70),be=n.n(de);function pe(){var e=Object(i.c)(Q);return Object(x.jsx)(p.a,{children:Object(x.jsxs)(je.a,{className:be.a.wrapper,children:[Object(x.jsx)("h1",{children:"Hello, world!"}),Object(x.jsx)("p",{children:"This is some information about our phonebook app"}),!e&&Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Please log in to access your contacts book"}),Object(x.jsx)(f.a,{as:l.b,variant:"dark",size:"sm",type:"button",to:"/login",children:"Log in"}),Object(x.jsx)("p",{children:"First time here? Please register to start using our amazing app"}),Object(x.jsx)(f.a,{as:l.b,variant:"dark",size:"sm",type:"button",to:"/register",children:"Register"})]})]})})}var he=n(42),fe=n.n(he);function Oe(){var e=Object(i.b)(),t=Object(a.useState)(""),n=Object(v.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),o=Object(v.a)(s,2),u=o[0],l=o[1],j=Object(a.useState)(""),d=Object(v.a)(j,2),b=d[0],h=d[1],O=Object(i.c)($),m=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"name":return c(r);case"email":return l(r);case"password":return h(r);default:return}};return Object(x.jsxs)(p.a,{className:fe.a.wrapper,children:[Object(x.jsx)("h1",{className:fe.a.heading,children:"Create your account"}),Object(x.jsxs)(V.a,{onSubmit:function(t){t.preventDefault(),e(oe.register({name:r,email:u,password:b}))},className:fe.a.form,children:[Object(x.jsxs)(V.a.Group,{controlId:"userName",children:[Object(x.jsx)(V.a.Label,{children:"Your Name"}),Object(x.jsx)(V.a.Control,{type:"input",placeholder:"Type your name here",autoComplete:"off",value:r,name:"name",onChange:m})]}),Object(x.jsxs)(V.a.Group,{controlId:"userEmail",children:[Object(x.jsx)(V.a.Label,{children:"Your Email Address"}),Object(x.jsx)(V.a.Control,{type:"email",placeholder:"Type your email here",autoComplete:"off",value:u,name:"email",onChange:m})]}),Object(x.jsxs)(V.a.Group,{controlId:"userPassword",children:[Object(x.jsx)(V.a.Label,{children:"Create Password"}),Object(x.jsx)(V.a.Control,{type:"Password",autoComplete:"off",value:b,name:"password",onChange:m})]}),Object(x.jsx)(f.a,{variant:"dark",type:"submit",disabled:O,children:O?"Loading...":"Register"})]})]})}var me=n(43),xe=n.n(me);function ge(){var e=Object(a.useState)(""),t=Object(v.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(v.a)(c,2),o=s[0],u=s[1],l=Object(i.b)(),j=Object(i.c)($),d=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":return r(a);case"password":return u(a);default:return}};return Object(x.jsxs)(p.a,{className:xe.a.wrapper,children:[Object(x.jsx)("h1",{className:xe.a.heading,children:"Please, log in"}),Object(x.jsxs)(V.a,{onSubmit:function(e){e.preventDefault(),l(oe.login({email:n,password:o})),r(""),u("")},className:xe.a.form,children:[Object(x.jsxs)(V.a.Group,{controlId:"userEmail",children:[Object(x.jsx)(V.a.Label,{children:"Your Email Address"}),Object(x.jsx)(V.a.Control,{type:"email",placeholder:"Type your email here",autoComplete:"off",value:n,name:"email",onChange:d})]}),Object(x.jsxs)(V.a.Group,{controlId:"userPassword",children:[Object(x.jsx)(V.a.Label,{children:"Enter your Password"}),Object(x.jsx)(V.a.Control,{type:"Password",autoComplete:"off",value:o,name:"password",onChange:d})]}),Object(x.jsx)(f.a,{variant:"dark",type:"submit",disabled:j,children:j?"Loading...":"Login"})]})]})}var ve=n(31),_e=n(40);function we(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,a=Object(_e.a)(e,["children","redirectTo"]),c=Object(i.c)(Q);return Object(x.jsx)(j.b,Object(ve.a)(Object(ve.a)({},a),{},{children:c?t:Object(x.jsx)(j.a,{to:r})}))}function ke(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,a=e.redirectTo,c=void 0===a?"/":a,s=Object(_e.a)(e,["children","restricted","redirectTo"]),o=Object(i.c)(Q)&&r;return Object(x.jsx)(j.b,Object(ve.a)(Object(ve.a)({},s),{},{children:o?Object(x.jsx)(j.a,{to:c}):t}))}n(122);function ye(){var e=Object(i.b)(),t=Object(i.c)(X);return Object(a.useEffect)((function(){e(oe.fetchCurrentUser())}),[e]),t?Object(x.jsx)(b.a,{type:"Puff",color:"#343a40",height:150,width:150,style:{textAlign:"center",marginTop:"100px"}}):Object(x.jsxs)(p.a,{children:[Object(x.jsx)(le,{}),Object(x.jsxs)(j.d,{children:[Object(x.jsx)(ke,{exact:!0,path:"/",children:Object(x.jsx)(pe,{})}),Object(x.jsx)(ke,{path:"/register",redirectTo:"/contacts",restricted:!0,children:Object(x.jsx)(Oe,{})}),Object(x.jsx)(ke,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(x.jsx)(ge,{})}),Object(x.jsx)(we,{path:"/contacts",redirectTo:"/login",children:Object(x.jsx)(ne,{})})]})]})}var Le,Ce=n(27),Ne=n(72),Se=n.n(Ne),Te=Object(w.c)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingUser:!1,isLoading:!1},extraReducers:(Le={},Object(_.a)(Le,oe.register.pending,(function(e){e.isLoading=!0})),Object(_.a)(Le,oe.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(_.a)(Le,oe.register.rejected,(function(e){e.isLoading=!1})),Object(_.a)(Le,oe.login.pending,(function(e){e.isLoading=!0})),Object(_.a)(Le,oe.login.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(_.a)(Le,oe.login.rejected,(function(e){e.isLoading=!1})),Object(_.a)(Le,oe.logout.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1,e.isLoading=!1})),Object(_.a)(Le,oe.fetchCurrentUser.pending,(function(e){e.isFetchingUser=!0})),Object(_.a)(Le,oe.fetchCurrentUser.fulfilled,(function(e,t){var n=t.payload;e.user=n,e.isLoggedIn=!0,e.isFetchingUser=!1})),Object(_.a)(Le,oe.fetchCurrentUser.rejected,(function(e){e.isFetchingUser=!1})),Le)}).reducer,Fe={key:"auth",storage:Se.a,whitelist:["token"]},Ie=Object(w.a)({reducer:{contacts:E,auth:Object(Ce.g)(Fe,Te)},middleware:Object(w.d)({serializableCheck:{ignoredActions:[Ce.a,Ce.f,Ce.b,Ce.c,Ce.d,Ce.e]}}),devTools:!1}),Pe=Object(Ce.h)(Ie);n(125),n(126);o.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(i.a,{store:Ie,children:Object(x.jsx)(u.a,{loading:null,persistor:Pe,children:Object(x.jsx)(l.a,{children:Object(x.jsx)(ye,{})})})})}),document.getElementById("root"))},30:function(e,t,n){e.exports={navBar:"Header_navBar__1sGf6",userMenu:"Header_userMenu__ifF98",link:"Header_link__-CFWG",welcome:"Header_welcome__18a4Z"}},42:function(e,t,n){e.exports={wrapper:"Register_wrapper__22RpK",heading:"Register_heading__1PBL-",form:"Register_form__1y2Kh"}},43:function(e,t,n){e.exports={wrapper:"Login_wrapper__2Lx96",heading:"Login_heading__1mRkY",form:"Login_form__2hdvv"}},51:function(e,t,n){e.exports={filter:"Filter_filter__1S7gK",filter__input:"Filter_filter__input__3aTQ8"}},52:function(e,t,n){e.exports={backdrop:"Modal_backdrop__3mhfq",content:"Modal_content__lFI_k"}},67:function(e,t,n){e.exports={contact:"Contact_contact__3izn4"}},68:function(e,t,n){e.exports={wrapper:"ContactsMenu_wrapper__3pJHF"}},69:function(e,t,n){e.exports={contactList:"ContactList_contactList__Po4y0"}},70:function(e,t,n){e.exports={wrapper:"Homepage_wrapper__1yJL9"}}},[[127,1,2]]]);
//# sourceMappingURL=main.69351fed.chunk.js.map